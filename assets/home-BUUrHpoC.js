import"./index-BMGIH1KI.js";import"./auth-DAZIr-f5.js";import{i as x,g as J,o as T}from"./index-54738136-Bd3ggPxx.js";import{g as M,d as z,b,a as G,T as m,c as $,u as N,e as _}from"./index.esm2017-D3mW0qPC.js";let O,k,L;async function q(){O=await F("https://hadriengardeur.github.io/web-speech-recommended-voices/json/en.json"),k=K(O);var e=window.speechSynthesis.getVoices();for(const t of e)if(t.name===k[0].name){L=t,console.log(L);break}}q();async function F(e){try{return await(await fetch(e)).json()}catch(t){return console.error("Error loading JSON data:",t),null}}function K(e){if(!e)return[];const t=[],l=window.speechSynthesis.getVoices(),n=l.filter(s=>s.name.includes("Google")==!1);return n.length!=0&&(e.voices=n),e.voices.forEach(function(s){l.some(c=>c.name===s.name)?t.push(s):s.altNames&&s.altNames.forEach(function(c){l.some(o=>o.name===c)&&(s.name=c,t.push(s))})}),t}async function H(e){var t=new SpeechSynthesisUtterance;t.voice=L,t.volume=1,t.rate=1,t.pitch=1,t.text=e,t.lang="en",speechSynthesis.speak(t)}console.log(window.speechSynthesis.getVoices());var U={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const Y=x(U),W=J(Y),Q=M(Y);let j=localStorage.getItem("email");T(W,async e=>{e&&(j=e.email)});let f=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")):[],y=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")):[],I=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")):[];f.length+y.length+I.length==0&&document.getElementById("list").classList.add("disabled");setInterval(()=>{f=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")):[],y=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")):[],I=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")):[],f.length+y.length+I.length==0?(document.getElementById("list").classList.add("disabled"),document.getElementById("card-list-menu").classList.remove("show")):document.getElementById("list").classList.remove("disabled")});document.getElementById("list").onclick=()=>{document.getElementById("list").classList.contains("disabled")||(document.getElementById("card-list-menu").classList.toggle("show"),f.forEach(e=>{v("green-card",e.data.word,e.data.meaning,e.data.example,e.id)}),y.forEach(e=>{v("blue-card",e.data.word,e.data.meaning,e.data.example,e.id)}),I.forEach(e=>{v("yellow-card",e.data.word,e.data.meaning,e.data.example,e.id)}))};document.getElementById("close-card-list-menu").onclick=()=>{document.getElementById("card-list-menu").classList.toggle("show"),document.getElementById("card-list").innerHTML=""};function v(e,t,l,n,s){let c=`
    <div class="${e}">
        <div> <span class="material-symbols-outlined"> view_carousel </span> </div>
        <div>
            <div>
                <p style="font-weight:bold">${t}</p>
                <p>${l}</p>
                <p style="font-weight:lighter">${n}</p>
            </div>
        </div>
        <div> <span class="material-symbols-outlined" id=${s} style="cursor:pointer"> delete </span> </div>
    </div>
    `,o=Z(c);document.getElementById("card-list").appendChild(o),document.getElementById(s).onclick=()=>{document.getElementById(s).parentElement.parentElement.remove(),e=="green-card"?(f=f.filter(r=>r.id!=s),localStorage.setItem("green",JSON.stringify(f))):e=="blue-card"?(y=y.filter(r=>r.id!=s),localStorage.setItem("blue",JSON.stringify(y))):e=="yellow-card"&&(I=I.filter(r=>r.id!=s),localStorage.setItem("yellow",JSON.stringify(I))),z(b(Q,j,s))}}function Z(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var P={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const D=x(P),R=J(D),w=M(D),h=[0,60,120,300,1800,3600,26e3,86400,172800,604800,1209600];let a=[],g=[],u=[];const d=document.getElementsByClassName("number");[...d][0].innerHTML=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")).length:"?";[...d][1].innerHTML=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")).length:"?";[...d][2].innerHTML=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")).length:"?";(localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")).length:0)==0?document.getElementById("start").classList.add("disabled"):document.getElementById("start").classList.remove("disabled");document.getElementById("add").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-add-menu").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-learn-menu").onclick=()=>{document.getElementById("learn-menu").classList.toggle("show"),i.style="",i.classList="",S=!1,p="none"};document.getElementById("start").onclick=()=>{if(a.length!=0){document.getElementById("learn-menu").classList.toggle("show"),a=a.sort((l,n)=>.5-Math.random()),localStorage.setItem("green",JSON.stringify(a));const e=i.getElementsByClassName("front")[0],t=i.getElementsByClassName("back")[0];V(e,t)}};let E=localStorage.getItem("email");T(R,async e=>{if(e){E=e.email;const t=$(w,E);(await _(t)).forEach(n=>{console.log(n.data().stage,h[n.data().stage],m.now().seconds-(h[n.data().stage]+n.data().time.seconds)),m.now().seconds-(h[n.data().stage]+n.data().time.seconds)>=0?a.push({id:n.id,data:n.data()}):n.data().stage<h.length-2?g.push({id:n.id,data:n.data()}):u.push({id:n.id,data:n.data()})}),[...d][0].innerHTML=a.length,[...d][1].innerHTML=g.length,[...d][2].innerHTML=u.length,localStorage.setItem("green",JSON.stringify(a)),localStorage.setItem("blue",JSON.stringify(g)),localStorage.setItem("yellow",JSON.stringify(u))}});document.getElementById("word").onkeyup=()=>{const e=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURI(document.getElementById("word").value)}`;fetch(e).then(t=>t.json()).then(t=>{console.log(t[0].map(l=>l[0]).join("")),document.getElementById("meaning").value=t[0].map(l=>l[0]).join("")}).catch(t=>(console.log(t),""))};document.getElementById("submit").onclick=async()=>{const e=document.getElementById("word").value,t=document.getElementById("meaning").value,l=document.getElementById("example").value;e.trim()!=""&&t.trim()!=""&&(document.getElementById("word").value="",document.getElementById("meaning").value="",document.getElementById("example").value="",await G($(w,E),{word:e,meaning:t,example:l,stage:0,time:m.now()}).then(function(n){console.log(n),a.push({id:n.id,data:{word:e,meaning:t,example:l,stage:0,time:m.now()}}),[...d][0].innerHTML=a.length,localStorage.setItem("green",JSON.stringify(a))}))};setTimeout(()=>{setInterval(()=>{a=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")):[],g=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")):[],u=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")):[];let e=0;g.forEach(t=>{m.now().seconds-(h[t.data.stage]+t.data.time.seconds)>=0&&(a.push(t),g.splice(e,1)),e++}),e=0,u.forEach(t=>{m.now().seconds-(h[t.data.stage]+t.data.time.seconds)>=0&&(a.push(t),u.splice(e,1)),e++}),a.length==0?document.getElementById("start").classList.add("disabled"):document.getElementById("start").classList.remove("disabled"),[...d][0].innerHTML=a.length,[...d][1].innerHTML=g.length,[...d][2].innerHTML=u.length},0)},1e3);const i=document.querySelector(".card").children[0];i.addEventListener("mousedown",function(){if(!i.classList.contains("is-flipped")){i.classList.toggle("is-flipped");const e=i.getElementsByClassName("back")[0];e.style.color="black",document.getElementById("speaker").onclick=()=>{H(a[0].data.word+(a[0].data.example?`... ${a[0].data.example}`:""))},document.getElementById("document").onclick=()=>{window.open(`https://dictionary.cambridge.org/spellcheck/english/?q=${a[0].data.word}`)}}});function V(e,t){H(a[0].data.word+(a[0].data.example?`... ${a[0].data.example}`:"")),e.innerHTML=`
        <div>
            <h1>${a[0].data.word}</h1>
            ${a[0].data.example?`<h3>${a[0].data.example}</h3>`:""}
        </div>
    `,t.innerHTML=`
        <div>
            <h3>${a[0].data.word}</h3>
            <h1>${a[0].data.meaning}</h1>
            ${a[0].data.example?`<h3>${a[0].data.example}</h3>`:""}
            <hr>
            <span class="material-symbols-outlined" id="speaker">brand_awareness</span>
            <span class="material-symbols-outlined" id="document">description</span>
            <p id="right">Đã nhớ</p>
            <p id="wrong">Học lại</p>
        </div>
    `}let S=!1,p="none";i.addEventListener("transitionend",function(){S=!0},!1);ee(i);function ee(e){let t=null,l=null;e.addEventListener("mousedown",n,!1),e.addEventListener("touchstart",n,!1);function n(o){S&&(t=o.clientX===void 0?o.touches[0].clientX:o.clientX,l=o.clientY===void 0?o.touches[0].clientY:o.clientY,document.addEventListener("mousemove",s,!1),document.addEventListener("touchmove",s,!1),document.addEventListener("mouseup",c,!1),document.addEventListener("touchend",c,!1))}function s(o){if(S){if(t===null||l===null)return;const r=o.clientX===void 0?o.touches[0].clientX:o.clientX,B=o.clientY===void 0?o.touches[0].clientY:o.clientY,C=r-t,X=B-l;t=r,l=B,e.style.top=e.offsetTop+X+"px",e.style.left=e.offsetLeft+C+"px";const A=e.style.left.slice(0,-2)/window.innerWidth;e.style.transform="rotate("+-A+"rad) rotateY(180deg)",e.style.left.slice(0,-2)>window.innerWidth*15/100?(p="right",document.getElementById("right").style.display="initial"):e.style.left.slice(0,-2)<-window.innerWidth*15/100?(p="left",document.getElementById("wrong").style.display="initial"):(p="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none")}}function c(){if(t=null,l=null,p=="none")e.style.top=0,e.style.left=0,e.style.transform="rotate(0rad) rotateY(180deg)";else{speechSynthesis.cancel(),p=="right"?(N(b(w,E,a[0].id),{stage:Math.min(Math.max(a[0].data.stage+1,0),9),time:m.now()}),a[0].data.stage=Math.min(Math.max(a[0].data.stage+1,0),9),a[0].data.time=m.now(),a[0].data.stage<=h.length-3?g.push(a.shift()):u.push(a.shift())):p=="left"&&(a[0].data.stage=0,N(b(w,E,a[0].id),{stage:a[0].data.stage,time:m.now()}),a[0].data.time=m.now(),a[0].data.stage!=0?g.push(a.shift()):a.push(a.shift())),[...d][0].innerHTML=a.length,[...d][1].innerHTML=g.length,[...d][2].innerHTML=u.length,localStorage.setItem("green",JSON.stringify(a)),localStorage.setItem("blue",JSON.stringify(g)),localStorage.setItem("yellow",JSON.stringify(u)),e.style="",i.classList="",S=!1,p="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none";const o=i.getElementsByClassName("front")[0],r=i.getElementsByClassName("back")[0];r.style.color="white",a.length!=0?V(o,r):document.getElementById("learn-menu").classList.toggle("show")}document.removeEventListener("mousemove",s,!1),document.removeEventListener("touchmove",s,!1),document.removeEventListener("mouseup",c,!1),document.removeEventListener("touchend",c,!1)}}
