import"./index-BMGIH1KI.js";import{g as N,d as z,b as L,a as A,T as g,c as O,s as T,u as b,e as _}from"./index.esm2017-BfrQwWGW.js";import"./auth-DAZIr-f5.js";import{i as x,g as M,o as k}from"./index-54738136-Bd3ggPxx.js";var j={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const J=x(j),q=M(J),F=N(J);let $=localStorage.getItem("email");k(q,async e=>{e&&($=e.email)});let h=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")):[],y=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")):[],f=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")):[];h.length+y.length+f.length==0&&document.getElementById("list").classList.add("disabled");setInterval(()=>{h=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")):[],y=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")):[],f=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")):[],h.length+y.length+f.length==0?(document.getElementById("list").classList.add("disabled"),document.getElementById("card-list-menu").classList.remove("show")):document.getElementById("list").classList.remove("disabled")});document.getElementById("list").onclick=()=>{document.getElementById("list").classList.contains("disabled")||(document.getElementById("card-list-menu").classList.toggle("show"),h.forEach(e=>{v("green-card",e.data.word,e.data.meaning,e.data.example,e.id)}),y.forEach(e=>{v("blue-card",e.data.word,e.data.meaning,e.data.example,e.id)}),f.forEach(e=>{v("yellow-card",e.data.word,e.data.meaning,e.data.example,e.id)}))};document.getElementById("close-card-list-menu").onclick=()=>{document.getElementById("card-list-menu").classList.toggle("show"),document.getElementById("card-list").innerHTML=""};function v(e,a,s,n,d){let I=`
    <div class="${e}">
        <div> <span class="material-symbols-outlined"> view_carousel </span> </div>
        <div>
            <div>
                <p style="font-weight:bold">${a}</p>
                <p>${s}</p>
                <p style="font-weight:lighter">${n}</p>
            </div>
        </div>
        <div> <span class="material-symbols-outlined" id=${d} style="cursor:pointer"> delete </span> </div>
    </div>
    `,l=G(I);document.getElementById("card-list").appendChild(l),document.getElementById(d).onclick=()=>{document.getElementById(d).parentElement.parentElement.remove(),e=="green-card"?(h=h.filter(r=>r.id!=d),localStorage.setItem("green",JSON.stringify(h))):e=="blue-card"?(y=y.filter(r=>r.id!=d),localStorage.setItem("blue",JSON.stringify(y))):e=="yellow-card"&&(f=f.filter(r=>r.id!=d),localStorage.setItem("yellow",JSON.stringify(f))),z(L(F,$,d))}}function G(e){var a=document.createElement("div");return a.innerHTML=e.trim(),a.firstChild}var K={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const H=x(K),U=M(H),w=N(H),p=[0,60,120,300,1800,3600,26e3,86400,172800,604800,1209600];let t=[],c=[],m=[];const i=document.getElementsByClassName("number");[...i][0].innerHTML=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")).length:"?";[...i][1].innerHTML=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")).length:"?";[...i][2].innerHTML=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")).length:"?";(localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")).length:0)==0?document.getElementById("start").classList.add("disabled"):document.getElementById("start").classList.remove("disabled");document.getElementById("add").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-add-menu").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-learn-menu").onclick=()=>{document.getElementById("learn-menu").classList.toggle("show"),o.style="",o.classList="",E=!1,u="none",speechSynthesis.cancel()};document.getElementById("start").onclick=()=>{if(t.length!=0){document.getElementById("learn-menu").classList.toggle("show"),t=t.sort((s,n)=>.5-Math.random()),localStorage.setItem("green",JSON.stringify(t));const e=o.getElementsByClassName("front")[0],a=o.getElementsByClassName("back")[0];Y(e,a)}};let S=localStorage.getItem("email");k(U,async e=>{if(e){S=e.email;const a=O(w,S);(await _(a)).forEach(n=>{console.log(n.data().stage,p[n.data().stage],g.now().seconds-(p[n.data().stage]+n.data().time.seconds)),g.now().seconds-(p[n.data().stage]+n.data().time.seconds)>=0?t.push({id:n.id,data:n.data()}):n.data().stage<p.length-2?c.push({id:n.id,data:n.data()}):m.push({id:n.id,data:n.data()})}),[...i][0].innerHTML=t.length,[...i][1].innerHTML=c.length,[...i][2].innerHTML=m.length,localStorage.setItem("green",JSON.stringify(t)),localStorage.setItem("blue",JSON.stringify(c)),localStorage.setItem("yellow",JSON.stringify(m))}});document.getElementById("word").onkeyup=()=>{const e=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURI(document.getElementById("word").value)}`;fetch(e).then(a=>a.json()).then(a=>{console.log(a[0].map(s=>s[0]).join("")),document.getElementById("meaning").value=a[0].map(s=>s[0]).join("")}).catch(a=>(console.log(a),""))};document.getElementById("submit").onclick=async()=>{const e=document.getElementById("word").value,a=document.getElementById("meaning").value,s=document.getElementById("example").value;e.trim()!=""&&a.trim()!=""&&(document.getElementById("word").value="",document.getElementById("meaning").value="",document.getElementById("example").value="",await A(O(w,S),{word:e,meaning:a,example:s,stage:0,time:g.now()}).then(function(n){console.log(n),t.push({id:n.id,data:{word:e,meaning:a,example:s,stage:0,time:g.now()}}),[...i][0].innerHTML=t.length,localStorage.setItem("green",JSON.stringify(t))}))};setTimeout(()=>{setInterval(()=>{t=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")):[],c=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")):[],m=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")):[];let e=0;c.forEach(a=>{g.now().seconds-(p[a.data.stage]+a.data.time.seconds)>=0&&(t.push(a),c.splice(e,1)),e++}),e=0,m.forEach(a=>{g.now().seconds-(p[a.data.stage]+a.data.time.seconds)>=0&&(t.push(a),m.splice(e,1)),e++}),t.length==0?document.getElementById("start").classList.add("disabled"):document.getElementById("start").classList.remove("disabled"),[...i][0].innerHTML=t.length,[...i][1].innerHTML=c.length,[...i][2].innerHTML=m.length},0)},1e3);const o=document.querySelector(".card").children[0];o.addEventListener("mousedown",function(){if(!o.classList.contains("is-flipped")){o.classList.toggle("is-flipped");const e=o.getElementsByClassName("back")[0];e.style.color="black",document.getElementById("speaker").onclick=()=>{T(t[0].data.word+(t[0].data.example?`... ${t[0].data.example}`:""))},document.getElementById("document").onclick=()=>{window.open(`https://dictionary.cambridge.org/spellcheck/english/?q=${t[0].data.word}`)}}});function Y(e,a){T(t[0].data.word+(t[0].data.example?`... ${t[0].data.example}`:"")),e.innerHTML=`
        <div>
            <h1>${t[0].data.word}</h1>
            ${t[0].data.example?`<h3>${t[0].data.example}</h3>`:""}
        </div>
    `,a.innerHTML=`
        <div>
            <h3>${t[0].data.word}</h3>
            <h1>${t[0].data.meaning}</h1>
            ${t[0].data.example?`<h3>${t[0].data.example}</h3>`:""}
            <hr>
            <span class="material-symbols-outlined" id="speaker">brand_awareness</span>
            <span class="material-symbols-outlined" id="document">description</span>
            <p id="right">Đã nhớ</p>
            <p id="wrong">Học lại</p>
        </div>
    `}let E=!1,u="none";o.addEventListener("transitionend",function(){E=!0},!1);W(o);function W(e){let a=null,s=null;e.addEventListener("mousedown",n,!1),e.addEventListener("touchstart",n,!1);function n(l){E&&(a=l.clientX===void 0?l.touches[0].clientX:l.clientX,s=l.clientY===void 0?l.touches[0].clientY:l.clientY,document.addEventListener("mousemove",d,!1),document.addEventListener("touchmove",d,!1),document.addEventListener("mouseup",I,!1),document.addEventListener("touchend",I,!1))}function d(l){if(E){if(a===null||s===null)return;const r=l.clientX===void 0?l.touches[0].clientX:l.clientX,B=l.clientY===void 0?l.touches[0].clientY:l.clientY,C=r-a,X=B-s;a=r,s=B,e.style.top=e.offsetTop+X+"px",e.style.left=e.offsetLeft+C+"px";const D=e.style.left.slice(0,-2)/window.innerWidth;e.style.transform="rotate("+-D+"rad) rotateY(180deg)",e.style.left.slice(0,-2)>window.innerWidth*15/100?(u="right",document.getElementById("right").style.display="initial"):e.style.left.slice(0,-2)<-window.innerWidth*15/100?(u="left",document.getElementById("wrong").style.display="initial"):(u="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none")}}function I(){if(a=null,s=null,u=="none")e.style.top=0,e.style.left=0,e.style.transform="rotate(0rad) rotateY(180deg)";else{speechSynthesis.cancel(),u=="right"?(b(L(w,S,t[0].id),{stage:Math.min(Math.max(t[0].data.stage+1,0),9),time:g.now()}),t[0].data.stage=Math.min(Math.max(t[0].data.stage+1,0),9),t[0].data.time=g.now(),t[0].data.stage<=p.length-3?c.push(t.shift()):m.push(t.shift())):u=="left"&&(t[0].data.stage=0,b(L(w,S,t[0].id),{stage:t[0].data.stage,time:g.now()}),t[0].data.time=g.now(),t[0].data.stage!=0?c.push(t.shift()):t.push(t.shift())),[...i][0].innerHTML=t.length,[...i][1].innerHTML=c.length,[...i][2].innerHTML=m.length,localStorage.setItem("green",JSON.stringify(t)),localStorage.setItem("blue",JSON.stringify(c)),localStorage.setItem("yellow",JSON.stringify(m)),e.style="",o.classList="",E=!1,u="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none";const l=o.getElementsByClassName("front")[0],r=o.getElementsByClassName("back")[0];r.style.color="white",t.length!=0?Y(l,r):document.getElementById("learn-menu").classList.toggle("show")}document.removeEventListener("mousemove",d,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("mouseup",I,!1),document.removeEventListener("touchend",I,!1)}}
