import"./index-BMGIH1KI.js";import"./auth-DAZIr-f5.js";import{i as J,g as Y,o as $}from"./index-54738136-Bd3ggPxx.js";import{g as V,a as X,T as d,c as N,u as S,d as L,b as j}from"./index.esm2017-D84HqCLi.js";let B,b,v;async function D(){B=await q("https://hadriengardeur.github.io/web-speech-recommended-voices/json/en.json"),b=A(B);var t=window.speechSynthesis.getVoices();for(const e of t)if(e.name===b[0].name){v=e,console.log(v);break}}D();async function q(t){try{return await(await fetch(t)).json()}catch(e){return console.error("Error loading JSON data:",e),null}}function A(t){if(!t)return[];const e=[],s=window.speechSynthesis.getVoices(),a=s.filter(l=>l.name.includes("Google")==!1);return a.length!=0&&(t.voices=a),t.voices.forEach(function(l){s.some(g=>g.name===l.name)?e.push(l):l.altNames&&l.altNames.forEach(function(g){s.some(o=>o.name===g)&&(l.name=g,e.push(l))})}),e}async function k(t){var e=new SpeechSynthesisUtterance;e.voice=v,e.volume=1,e.rate=1,e.text=t,e.lang="en",speechSynthesis.speak(e)}console.log(window.speechSynthesis.getVoices());var z={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const M=J(z),G=Y(M),E=V(M),h=[0,60,120,300,1800,3600,26e3,86400,172800,604800,1209600],w=[];let n=[],r=[],m=[];const c=document.getElementsByClassName("number");[...c][0].innerHTML=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")).length:"?";[...c][1].innerHTML=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")).length:"?";[...c][2].innerHTML=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")).length:"?";let y="";$(G,async t=>{if(t){y=t.email;const e=N(E,y);(await j(e)).forEach(a=>{w.push({id:a.id,data:a.data()}),console.log(a.data().stage,h[a.data().stage],d.now().seconds-(h[a.data().stage]+a.data().time.seconds)),d.now().seconds-(h[a.data().stage]+a.data().time.seconds)>=0?n.push({id:a.id,data:a.data()}):a.data().stage<h.length-2?r.push({id:a.id,data:a.data()}):m.push({id:a.id,data:a.data()})}),console.log(w),[...c][0].innerHTML=n.length,[...c][1].innerHTML=r.length,[...c][2].innerHTML=m.length,localStorage.setItem("cards",JSON.stringify(w)),localStorage.setItem("green",JSON.stringify(n)),localStorage.setItem("blue",JSON.stringify(r)),localStorage.setItem("yellow",JSON.stringify(m))}});document.getElementById("word").onkeyup=()=>{const t=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURI(document.getElementById("word").value)}`;fetch(t).then(e=>e.json()).then(e=>{console.log(e[0].map(s=>s[0]).join("")),document.getElementById("meaning").value=e[0].map(s=>s[0]).join("")}).catch(e=>(console.log(e),""))};document.getElementById("submit").onclick=async()=>{const t=document.getElementById("word").value,e=document.getElementById("meaning").value,s=document.getElementById("example").value;t.trim()!=""&&e.trim()!=""&&(document.getElementById("word").value="",document.getElementById("meaning").value="",document.getElementById("example").value="",await X(N(E,y),{word:t,meaning:e,example:s,stage:0,time:d.now()}).then(function(a){console.log(a),n.push({id:a.id,data:{word:t,meaning:e,example:s,stage:0,time:d.now()}}),[...c][0].innerHTML=n.length,localStorage.setItem("cards",JSON.stringify(w)),localStorage.setItem("green",JSON.stringify(n))}))};document.getElementById("add").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-add-menu").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};setInterval(()=>{let t=0;r.forEach(e=>{d.now().seconds-(h[e.data.stage]+e.data.time.seconds)>=0&&(n.push(e),console.log(e,d.now().seconds,h[e.data.stage]+e.data.time.seconds),r.splice(t,1)),t++}),t=0,m.forEach(e=>{d.now().seconds-(h[e.data.stage]+e.data.time.seconds)>=0&&(n.push(e),m.splice(t,1)),t++}),[...c][0].innerHTML=n.length,[...c][1].innerHTML=r.length,[...c][2].innerHTML=m.length},2e3);const i=document.querySelector(".card").children[0];i.addEventListener("mousedown",function(){if(!i.classList.contains("is-flipped")){i.classList.toggle("is-flipped");const t=i.getElementsByClassName("back")[0];t.style.color="black",document.getElementById("speaker").onclick=()=>{k(n[0].data.word+(n[0].data.example?`... ${n[0].data.example}`:""))},document.getElementById("document").onclick=()=>{window.open(`https://dictionary.cambridge.org/spellcheck/english/?q=${n[0].data.word}`)}}});document.getElementById("close-test-menu").onclick=()=>{document.getElementById("test-menu").classList.toggle("show"),i.style="",i.classList="",p=!1,u="none"};document.getElementById("start").onclick=()=>{if(n.length!=0){document.getElementById("test-menu").classList.toggle("show"),n=n.sort((s,a)=>.5-Math.random());const t=i.getElementsByClassName("front")[0],e=i.getElementsByClassName("back")[0];x(t,e)}};function x(t,e){k(n[0].data.word+(n[0].data.example?`... ${n[0].data.example}`:"")),t.innerHTML=`
        <div>
            <h1>${n[0].data.word}</h1>
            ${n[0].data.example?`<h3>${n[0].data.example}</h3>`:""}
        </div>
    `,e.innerHTML=`
        <div>
            <h3>${n[0].data.word}</h3>
            <h1>${n[0].data.meaning}</h1>
            ${n[0].data.example?`<h3>${n[0].data.example}</h3>`:""}
            <hr>
            <span class="material-symbols-outlined" id="speaker">brand_awareness</span>
            <span class="material-symbols-outlined" id="document">description</span>
            <p id="right">Đã nhớ</p>
            <p id="wrong">Học lại</p>
        </div>
    `}let p=!1,u="none";i.addEventListener("transitionend",function(){p=!0},!1);_(i);function _(t){let e=null,s=null;t.addEventListener("mousedown",a,!1),t.addEventListener("touchstart",a,!1);function a(o){p&&(e=o.clientX===void 0?o.touches[0].clientX:o.clientX,s=o.clientY===void 0?o.touches[0].clientY:o.clientY,document.addEventListener("mousemove",l,!1),document.addEventListener("touchmove",l,!1),document.addEventListener("mouseup",g,!1),document.addEventListener("touchend",g,!1))}function l(o){if(p){if(e===null||s===null)return;const f=o.clientX===void 0?o.touches[0].clientX:o.clientX,I=o.clientY===void 0?o.touches[0].clientY:o.clientY,T=f-e,H=I-s;e=f,s=I,t.style.top=t.offsetTop+H+"px",t.style.left=t.offsetLeft+T+"px";const O=t.style.left.slice(0,-2)/window.innerWidth;t.style.transform="rotate("+-O+"rad) rotateY(180deg)",t.style.left.slice(0,-2)>window.innerWidth*15/100?(u="right",document.getElementById("right").style.display="initial"):t.style.left.slice(0,-2)<-window.innerWidth*15/100?(u="left",document.getElementById("wrong").style.display="initial"):(u="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none")}}function g(){if(e=null,s=null,u=="none")t.style.top=0,t.style.left=0,t.style.transform="rotate(0rad) rotateY(180deg)";else{speechSynthesis.cancel(),u=="right"?(S(L(E,y,n[0].id),{stage:Math.min(Math.max(n[0].data.stage+1,0),9),time:d.now()}),n[0].data.stage=Math.min(Math.max(n[0].data.stage+1,0),9),n[0].data.time=d.now(),n[0].data.stage<=h.length-3?r.push(n.shift()):m.push(n.shift())):u=="left"&&(n[0].data.stage=0,S(L(E,y,n[0].id),{stage:n[0].data.stage,time:d.now()}),n[0].data.time=d.now(),n[0].data.stage!=0?r.push(n.shift()):n.push(n.shift())),[...c][0].innerHTML=n.length,[...c][1].innerHTML=r.length,[...c][2].innerHTML=m.length,localStorage.setItem("green",JSON.stringify(n)),localStorage.setItem("blue",JSON.stringify(r)),localStorage.setItem("yellow",JSON.stringify(m)),t.style="",i.classList="",p=!1,u="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none";const o=i.getElementsByClassName("front")[0],f=i.getElementsByClassName("back")[0];f.style.color="white",n.length!=0?x(o,f):document.getElementById("test-menu").classList.toggle("show")}document.removeEventListener("mousemove",l,!1),document.removeEventListener("touchmove",l,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1)}}
