import"./index-BMGIH1KI.js";import"./auth-DAZIr-f5.js";import{i as k,g as x,o as T}from"./index-54738136-Bd3ggPxx.js";import{g as M,a as X,T as r,c as H,u as L,d as B,b as A}from"./index.esm2017-D84HqCLi.js";let b,N,v;async function z(){b=await G("https://hadriengardeur.github.io/web-speech-recommended-voices/json/en.json"),N=_(b);var t=window.speechSynthesis.getVoices();for(const e of t)if(e.name===N[0].name){v=e,console.log(v);break}}z();async function G(t){try{return await(await fetch(t)).json()}catch(e){return console.error("Error loading JSON data:",e),null}}function _(t){if(!t)return[];const e=[],s=window.speechSynthesis.getVoices(),n=s.filter(l=>l.name.includes("Google")==!1);return n.length!=0&&(t.voices=n),t.voices.forEach(function(l){s.some(c=>c.name===l.name)?e.push(l):l.altNames&&l.altNames.forEach(function(c){s.some(o=>o.name===c)&&(l.name=c,e.push(l))})}),e}async function O(t){var e=new SpeechSynthesisUtterance;e.voice=v,e.volume=1,e.rate=1,e.pitch=1,e.text=t,e.lang="en",speechSynthesis.speak(e)}console.log(window.speechSynthesis.getVoices());var q={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const $=k(q),C=x($);M($);T(C,async t=>{t&&t.email});document.getElementById("list").onclick=()=>{document.getElementById("card-list-menu").classList.toggle("show");let t=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")):[],e=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")):[],s=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")):[];t.forEach(n=>{E("green-card",n.data.word,n.data.meaning,n.data.example,n.id)}),e.forEach(n=>{E("blue-card",n.data.word,n.data.meaning,n.data.example,n.id)}),s.forEach(n=>{E("yellow-card",n.data.word,n.data.meaning,n.data.example,n.id)})};document.getElementById("close-card-list-menu").onclick=()=>{document.getElementById("card-list-menu").classList.toggle("show"),document.getElementById("card-list").innerHTML=""};function E(t,e,s,n,l){let c=`
    <div class="${t}">
        <div> <span class="material-symbols-outlined"> view_carousel </span> </div>
        <div>
            <div>
                <p style="font-weight: bold;">${e}</p>
                <p>${s}</p>
                <p style="font-weight: lighter;">${n}</p>
            </div>
        </div>
        <div> <span class="material-symbols-outlined" onclick="${()=>{console.log("!!!")}}"> delete </span> </div>
    </div>
    `,o=F(c);document.getElementById("card-list").appendChild(o)}function F(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}var K={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const J=k(K),U=x(J),I=M(J),p=[0,60,120,300,1800,3600,26e3,86400,172800,604800,1209600],w=[];let a=[],g=[],m=[];const d=document.getElementsByClassName("number");[...d][0].innerHTML=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")).length:"?";[...d][1].innerHTML=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")).length:"?";[...d][2].innerHTML=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")).length:"?";document.getElementById("add").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-add-menu").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-test-menu").onclick=()=>{document.getElementById("test-menu").classList.toggle("show"),i.style="",i.classList="",f=!1,u="none"};document.getElementById("start").onclick=()=>{if(a.length!=0){document.getElementById("test-menu").classList.toggle("show"),a=a.sort((s,n)=>.5-Math.random());const t=i.getElementsByClassName("front")[0],e=i.getElementsByClassName("back")[0];Y(t,e)}};let y="";T(U,async t=>{if(t){y=t.email;const e=H(I,y);(await A(e)).forEach(n=>{w.push({id:n.id,data:n.data()}),console.log(n.data().stage,p[n.data().stage],r.now().seconds-(p[n.data().stage]+n.data().time.seconds)),r.now().seconds-(p[n.data().stage]+n.data().time.seconds)>=0?a.push({id:n.id,data:n.data()}):n.data().stage<p.length-2?g.push({id:n.id,data:n.data()}):m.push({id:n.id,data:n.data()})}),console.log(w),[...d][0].innerHTML=a.length,[...d][1].innerHTML=g.length,[...d][2].innerHTML=m.length,localStorage.setItem("cards",JSON.stringify(w)),localStorage.setItem("green",JSON.stringify(a)),localStorage.setItem("blue",JSON.stringify(g)),localStorage.setItem("yellow",JSON.stringify(m))}});document.getElementById("word").onkeyup=()=>{const t=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURI(document.getElementById("word").value)}`;fetch(t).then(e=>e.json()).then(e=>{console.log(e[0].map(s=>s[0]).join("")),document.getElementById("meaning").value=e[0].map(s=>s[0]).join("")}).catch(e=>(console.log(e),""))};document.getElementById("submit").onclick=async()=>{const t=document.getElementById("word").value,e=document.getElementById("meaning").value,s=document.getElementById("example").value;t.trim()!=""&&e.trim()!=""&&(document.getElementById("word").value="",document.getElementById("meaning").value="",document.getElementById("example").value="",await X(H(I,y),{word:t,meaning:e,example:s,stage:0,time:r.now()}).then(function(n){console.log(n),a.push({id:n.id,data:{word:t,meaning:e,example:s,stage:0,time:r.now()}}),[...d][0].innerHTML=a.length,localStorage.setItem("cards",JSON.stringify(w)),localStorage.setItem("green",JSON.stringify(a))}))};setTimeout(()=>{setInterval(()=>{let t=0;g.forEach(e=>{r.now().seconds-(p[e.data.stage]+e.data.time.seconds)>=0&&(a.push(e),console.log(e,r.now().seconds,p[e.data.stage]+e.data.time.seconds),g.splice(t,1)),t++}),t=0,m.forEach(e=>{r.now().seconds-(p[e.data.stage]+e.data.time.seconds)>=0&&(a.push(e),m.splice(t,1)),t++}),a.length==0?document.getElementById("start").classList.add("disabled"):document.getElementById("start").classList.remove("disabled"),[...d][0].innerHTML=a.length,[...d][1].innerHTML=g.length,[...d][2].innerHTML=m.length},0)},1e3);const i=document.querySelector(".card").children[0];i.addEventListener("mousedown",function(){if(!i.classList.contains("is-flipped")){i.classList.toggle("is-flipped");const t=i.getElementsByClassName("back")[0];t.style.color="black",document.getElementById("speaker").onclick=()=>{O(a[0].data.word+(a[0].data.example?`... ${a[0].data.example}`:""))},document.getElementById("document").onclick=()=>{window.open(`https://dictionary.cambridge.org/spellcheck/english/?q=${a[0].data.word}`)}}});function Y(t,e){O(a[0].data.word+(a[0].data.example?`... ${a[0].data.example}`:"")),t.innerHTML=`
        <div>
            <h1>${a[0].data.word}</h1>
            ${a[0].data.example?`<h3>${a[0].data.example}</h3>`:""}
        </div>
    `,e.innerHTML=`
        <div>
            <h3>${a[0].data.word}</h3>
            <h1>${a[0].data.meaning}</h1>
            ${a[0].data.example?`<h3>${a[0].data.example}</h3>`:""}
            <hr>
            <span class="material-symbols-outlined" id="speaker">brand_awareness</span>
            <span class="material-symbols-outlined" id="document">description</span>
            <p id="right">Đã nhớ</p>
            <p id="wrong">Học lại</p>
        </div>
    `}let f=!1,u="none";i.addEventListener("transitionend",function(){f=!0},!1);W(i);function W(t){let e=null,s=null;t.addEventListener("mousedown",n,!1),t.addEventListener("touchstart",n,!1);function n(o){f&&(e=o.clientX===void 0?o.touches[0].clientX:o.clientX,s=o.clientY===void 0?o.touches[0].clientY:o.clientY,document.addEventListener("mousemove",l,!1),document.addEventListener("touchmove",l,!1),document.addEventListener("mouseup",c,!1),document.addEventListener("touchend",c,!1))}function l(o){if(f){if(e===null||s===null)return;const h=o.clientX===void 0?o.touches[0].clientX:o.clientX,S=o.clientY===void 0?o.touches[0].clientY:o.clientY,j=h-e,V=S-s;e=h,s=S,t.style.top=t.offsetTop+V+"px",t.style.left=t.offsetLeft+j+"px";const D=t.style.left.slice(0,-2)/window.innerWidth;t.style.transform="rotate("+-D+"rad) rotateY(180deg)",t.style.left.slice(0,-2)>window.innerWidth*15/100?(u="right",document.getElementById("right").style.display="initial"):t.style.left.slice(0,-2)<-window.innerWidth*15/100?(u="left",document.getElementById("wrong").style.display="initial"):(u="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none")}}function c(){if(e=null,s=null,u=="none")t.style.top=0,t.style.left=0,t.style.transform="rotate(0rad) rotateY(180deg)";else{speechSynthesis.cancel(),u=="right"?(L(B(I,y,a[0].id),{stage:Math.min(Math.max(a[0].data.stage+1,0),9),time:r.now()}),a[0].data.stage=Math.min(Math.max(a[0].data.stage+1,0),9),a[0].data.time=r.now(),a[0].data.stage<=p.length-3?g.push(a.shift()):m.push(a.shift())):u=="left"&&(a[0].data.stage=0,L(B(I,y,a[0].id),{stage:a[0].data.stage,time:r.now()}),a[0].data.time=r.now(),a[0].data.stage!=0?g.push(a.shift()):a.push(a.shift())),[...d][0].innerHTML=a.length,[...d][1].innerHTML=g.length,[...d][2].innerHTML=m.length,localStorage.setItem("green",JSON.stringify(a)),localStorage.setItem("blue",JSON.stringify(g)),localStorage.setItem("yellow",JSON.stringify(m)),t.style="",i.classList="",f=!1,u="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none";const o=i.getElementsByClassName("front")[0],h=i.getElementsByClassName("back")[0];h.style.color="white",a.length!=0?Y(o,h):document.getElementById("test-menu").classList.toggle("show")}document.removeEventListener("mousemove",l,!1),document.removeEventListener("touchmove",l,!1),document.removeEventListener("mouseup",c,!1),document.removeEventListener("touchend",c,!1)}}
