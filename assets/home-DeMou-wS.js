import"./index-BMGIH1KI.js";import"./auth-DAZIr-f5.js";import{i as J,g as Y,o as $}from"./index-54738136-Bd3ggPxx.js";import{g as j,a as V,T as c,c as N,u as S,d as L,b as X}from"./index.esm2017-D84HqCLi.js";let B,b,I;async function D(){B=await q("https://hadriengardeur.github.io/web-speech-recommended-voices/json/en.json"),b=A(B);var n=window.speechSynthesis.getVoices();for(const e of n)if(e.name===b[0].name){I=e,console.log(I);break}}D();async function q(n){try{return await(await fetch(n)).json()}catch(e){return console.error("Error loading JSON data:",e),null}}function A(n){if(!n)return[];const e=[],s=window.speechSynthesis.getVoices();return n.voices.forEach(function(a){s.some(r=>r.name===a.name)?e.push(a):a.altNames&&a.altNames.forEach(function(r){s.some(h=>h.name===r)&&(a.name=r,e.push(a))})}),e}async function k(n){var e=new SpeechSynthesisUtterance;e.voice=I,e.volume=1,e.rate=1,e.pitch=2,e.text=n,e.lang="en",speechSynthesis.speak(e)}console.log(window.speechSynthesis.getVoices());console.log(window.speechSynthesis.getVoices());var z={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const M=J(z),_=Y(M),E=j(M),u=[0,60,120,300,1800,3600,26e3,86400,172800,604800,1209600],w=[];let t=[],d=[],g=[];const i=document.getElementsByClassName("number");[...i][0].innerHTML=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")).length:"?";[...i][1].innerHTML=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")).length:"?";[...i][2].innerHTML=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")).length:"?";let y="";$(_,async n=>{if(n){y=n.email;const e=N(E,y);(await X(e)).forEach(a=>{w.push({id:a.id,data:a.data()}),console.log(a.data().stage,u[a.data().stage],c.now().seconds-(u[a.data().stage]+a.data().time.seconds)),c.now().seconds-(u[a.data().stage]+a.data().time.seconds)>=0?t.push({id:a.id,data:a.data()}):a.data().stage<u.length-2?d.push({id:a.id,data:a.data()}):g.push({id:a.id,data:a.data()})}),console.log(w),[...i][0].innerHTML=t.length,[...i][1].innerHTML=d.length,[...i][2].innerHTML=g.length,localStorage.setItem("cards",JSON.stringify(w)),localStorage.setItem("green",JSON.stringify(t)),localStorage.setItem("blue",JSON.stringify(d)),localStorage.setItem("yellow",JSON.stringify(g))}});document.getElementById("word").onkeyup=()=>{const n=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURI(document.getElementById("word").value)}`;fetch(n).then(e=>e.json()).then(e=>{console.log(e[0].map(s=>s[0]).join("")),document.getElementById("meaning").value=e[0].map(s=>s[0]).join("")}).catch(e=>(console.log(e),""))};document.getElementById("submit").onclick=async()=>{const n=document.getElementById("word").value,e=document.getElementById("meaning").value,s=document.getElementById("example").value;n.trim()!=""&&e.trim()!=""&&(document.getElementById("word").value="",document.getElementById("meaning").value="",document.getElementById("example").value="",await V(N(E,y),{word:n,meaning:e,example:s,stage:0,time:c.now()}).then(function(a){console.log(a),t.push({id:a.id,data:{word:n,meaning:e,example:s,stage:0,time:c.now()}}),[...i][0].innerHTML=t.length,localStorage.setItem("cards",JSON.stringify(w)),localStorage.setItem("green",JSON.stringify(t))}))};document.getElementById("add").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-add-menu").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};setInterval(()=>{let n=0;d.forEach(e=>{c.now().seconds-(u[e.data.stage]+e.data.time.seconds)>=0&&(t.push(e),console.log(e,c.now().seconds,u[e.data.stage]+e.data.time.seconds),d.splice(n,1)),n++}),n=0,g.forEach(e=>{c.now().seconds-(u[e.data.stage]+e.data.time.seconds)>=0&&(t.push(e),g.splice(n,1)),n++}),[...i][0].innerHTML=t.length,[...i][1].innerHTML=d.length,[...i][2].innerHTML=g.length},2e3);const l=document.querySelector(".card").children[0];l.addEventListener("mousedown",function(){if(!l.classList.contains("is-flipped")){l.classList.toggle("is-flipped");const n=l.getElementsByClassName("back")[0];n.style.color="black",document.getElementById("speaker").onclick=()=>{k(t[0].data.word+(t[0].data.example?`... ${t[0].data.example}`:""))},document.getElementById("document").onclick=()=>{window.open(`https://dictionary.cambridge.org/spellcheck/english/?q=${t[0].data.word}`)}}});document.getElementById("close-test-menu").onclick=()=>{document.getElementById("test-menu").classList.toggle("show"),l.style="",l.classList="",f=!1,m="none"};document.getElementById("start").onclick=()=>{if(t.length!=0){document.getElementById("test-menu").classList.toggle("show"),t=t.sort((s,a)=>.5-Math.random());const n=l.getElementsByClassName("front")[0],e=l.getElementsByClassName("back")[0];x(n,e)}};function x(n,e){k(t[0].data.word+(t[0].data.example?`... ${t[0].data.example}`:"")),n.innerHTML=`
        <div>
            <h1>${t[0].data.word}</h1>
            ${t[0].data.example?`<h3>${t[0].data.example}</h3>`:""}
        </div>
    `,e.innerHTML=`
        <div>
            <h3>${t[0].data.word}</h3>
            <h1>${t[0].data.meaning}</h1>
            ${t[0].data.example?`<h3>${t[0].data.example}</h3>`:""}
            <hr>
            <span class="material-symbols-outlined" id="speaker">brand_awareness</span>
            <span class="material-symbols-outlined" id="document">description</span>
            <p id="right">Đã nhớ</p>
            <p id="wrong">Học lại</p>
        </div>
    `}let f=!1,m="none";l.addEventListener("transitionend",function(){f=!0},!1);F(l);function F(n){let e=null,s=null;n.addEventListener("mousedown",a,!1),n.addEventListener("touchstart",a,!1);function a(o){f&&(e=o.clientX===void 0?o.touches[0].clientX:o.clientX,s=o.clientY===void 0?o.touches[0].clientY:o.clientY,document.addEventListener("mousemove",r,!1),document.addEventListener("touchmove",r,!1),document.addEventListener("mouseup",h,!1),document.addEventListener("touchend",h,!1))}function r(o){if(f){if(e===null||s===null)return;const p=o.clientX===void 0?o.touches[0].clientX:o.clientX,v=o.clientY===void 0?o.touches[0].clientY:o.clientY,T=p-e,H=v-s;e=p,s=v,n.style.top=n.offsetTop+H+"px",n.style.left=n.offsetLeft+T+"px";const O=n.style.left.slice(0,-2)/window.innerWidth;n.style.transform="rotate("+-O+"rad) rotateY(180deg)",n.style.left.slice(0,-2)>window.innerWidth*15/100?(m="right",document.getElementById("right").style.display="initial"):n.style.left.slice(0,-2)<-window.innerWidth*15/100?(m="left",document.getElementById("wrong").style.display="initial"):(m="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none")}}function h(){if(e=null,s=null,m=="none")n.style.top=0,n.style.left=0,n.style.transform="rotate(0rad) rotateY(180deg)";else{speechSynthesis.cancel(),m=="right"?(S(L(E,y,t[0].id),{stage:Math.min(Math.max(t[0].data.stage+1,0),9),time:c.now()}),t[0].data.stage=Math.min(Math.max(t[0].data.stage+1,0),9),t[0].data.time=c.now(),t[0].data.stage<=u.length-3?d.push(t.shift()):g.push(t.shift())):m=="left"&&(t[0].data.stage=0,S(L(E,y,t[0].id),{stage:t[0].data.stage,time:c.now()}),t[0].data.time=c.now(),t[0].data.stage!=0?d.push(t.shift()):t.push(t.shift())),[...i][0].innerHTML=t.length,[...i][1].innerHTML=d.length,[...i][2].innerHTML=g.length,localStorage.setItem("green",JSON.stringify(t)),localStorage.setItem("blue",JSON.stringify(d)),localStorage.setItem("yellow",JSON.stringify(g)),n.style="",l.classList="",f=!1,m="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none";const o=l.getElementsByClassName("front")[0],p=l.getElementsByClassName("back")[0];p.style.color="white",t.length!=0?x(o,p):document.getElementById("test-menu").classList.toggle("show")}document.removeEventListener("mousemove",r,!1),document.removeEventListener("touchmove",r,!1),document.removeEventListener("mouseup",h,!1),document.removeEventListener("touchend",h,!1)}}
