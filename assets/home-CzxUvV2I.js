import"./index-BMGIH1KI.js";import"./auth-DAZIr-f5.js";import{i as J,g as Y,o as $}from"./index-54738136-Bd3ggPxx.js";import{g as V,a as X,T as c,c as N,u as S,d as L,b as j}from"./index.esm2017-D84HqCLi.js";let B,b,I;async function D(){B=await q("https://hadriengardeur.github.io/web-speech-recommended-voices/json/en.json"),b=A(B);var n=window.speechSynthesis.getVoices();for(const e of n)if(e.name===b[0].name){I=e,console.log(I);break}}D();async function q(n){try{return await(await fetch(n)).json()}catch(e){return console.error("Error loading JSON data:",e),null}}function A(n){if(!n)return[];const e=[],s=window.speechSynthesis.getVoices(),a=s.filter(l=>l.name.includes("Google")==!1);return a.length!=0&&(n.voices=a),n.voices.forEach(function(l){s.some(g=>g.name===l.name)?e.push(l):l.altNames&&l.altNames.forEach(function(g){s.some(o=>o.name===g)&&(l.name=g,e.push(l))})}),e}async function k(n){var e=new SpeechSynthesisUtterance;e.voice=I,e.volume=1,e.rate=1,e.text=n,e.lang="en",speechSynthesis.speak(e)}console.log(window.speechSynthesis.getVoices());var z={apiKey:"AIzaSyAGz2x2bGOZjgBcUxBV7E4-xLtL0NszImQ",authDomain:"aurora-language-learning-app.firebaseapp.com",projectId:"aurora-language-learning-app",storageBucket:"aurora-language-learning-app.appspot.com",messagingSenderId:"251894860890",appId:"1:251894860890:web:cbc7735ba34d698c56dc63",measurementId:"G-LKN9TF0F4D"};const M=J(z),G=Y(M),E=V(M),h=[0,60,120,300,1800,3600,26e3,86400,172800,604800,1209600],w=[];let t=[],r=[],m=[];const d=document.getElementsByClassName("number");[...d][0].innerHTML=localStorage.getItem("green")?JSON.parse(localStorage.getItem("green")).length:"?";[...d][1].innerHTML=localStorage.getItem("blue")?JSON.parse(localStorage.getItem("blue")).length:"?";[...d][2].innerHTML=localStorage.getItem("yellow")?JSON.parse(localStorage.getItem("yellow")).length:"?";let y="";$(G,async n=>{if(n){y=n.email;const e=N(E,y);(await j(e)).forEach(a=>{w.push({id:a.id,data:a.data()}),console.log(a.data().stage,h[a.data().stage],c.now().seconds-(h[a.data().stage]+a.data().time.seconds)),c.now().seconds-(h[a.data().stage]+a.data().time.seconds)>=0?t.push({id:a.id,data:a.data()}):a.data().stage<h.length-2?r.push({id:a.id,data:a.data()}):m.push({id:a.id,data:a.data()})}),console.log(w),[...d][0].innerHTML=t.length,[...d][1].innerHTML=r.length,[...d][2].innerHTML=m.length,localStorage.setItem("cards",JSON.stringify(w)),localStorage.setItem("green",JSON.stringify(t)),localStorage.setItem("blue",JSON.stringify(r)),localStorage.setItem("yellow",JSON.stringify(m))}});document.getElementById("word").onkeyup=()=>{const n=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=vi&dt=t&q=${encodeURI(document.getElementById("word").value)}`;fetch(n).then(e=>e.json()).then(e=>{console.log(e[0].map(s=>s[0]).join("")),document.getElementById("meaning").value=e[0].map(s=>s[0]).join("")}).catch(e=>(console.log(e),""))};document.getElementById("submit").onclick=async()=>{const n=document.getElementById("word").value,e=document.getElementById("meaning").value,s=document.getElementById("example").value;n.trim()!=""&&e.trim()!=""&&(document.getElementById("word").value="",document.getElementById("meaning").value="",document.getElementById("example").value="",await X(N(E,y),{word:n,meaning:e,example:s,stage:0,time:c.now()}).then(function(a){console.log(a),t.push({id:a.id,data:{word:n,meaning:e,example:s,stage:0,time:c.now()}}),[...d][0].innerHTML=t.length,localStorage.setItem("cards",JSON.stringify(w)),localStorage.setItem("green",JSON.stringify(t))}))};document.getElementById("add").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};document.getElementById("close-add-menu").onclick=()=>{document.getElementById("add-menu").classList.toggle("show")};setTimeout(()=>{setInterval(()=>{let n=0;r.forEach(e=>{c.now().seconds-(h[e.data.stage]+e.data.time.seconds)>=0&&(t.push(e),console.log(e,c.now().seconds,h[e.data.stage]+e.data.time.seconds),r.splice(n,1)),n++}),n=0,m.forEach(e=>{c.now().seconds-(h[e.data.stage]+e.data.time.seconds)>=0&&(t.push(e),m.splice(n,1)),n++}),t.length==0?document.getElementById("start").classList.add("disabled"):document.getElementById("start").classList.remove("disabled"),[...d][0].innerHTML=t.length,[...d][1].innerHTML=r.length,[...d][2].innerHTML=m.length},0)},1e3);const i=document.querySelector(".card").children[0];i.addEventListener("mousedown",function(){if(!i.classList.contains("is-flipped")){i.classList.toggle("is-flipped");const n=i.getElementsByClassName("back")[0];n.style.color="black",document.getElementById("speaker").onclick=()=>{k(t[0].data.word+(t[0].data.example?`... ${t[0].data.example}`:""))},document.getElementById("document").onclick=()=>{window.open(`https://dictionary.cambridge.org/spellcheck/english/?q=${t[0].data.word}`)}}});document.getElementById("close-test-menu").onclick=()=>{document.getElementById("test-menu").classList.toggle("show"),i.style="",i.classList="",p=!1,u="none"};document.getElementById("start").onclick=()=>{if(t.length!=0){document.getElementById("test-menu").classList.toggle("show"),t=t.sort((s,a)=>.5-Math.random());const n=i.getElementsByClassName("front")[0],e=i.getElementsByClassName("back")[0];x(n,e)}};function x(n,e){k(t[0].data.word+(t[0].data.example?`... ${t[0].data.example}`:"")),n.innerHTML=`
        <div>
            <h1>${t[0].data.word}</h1>
            ${t[0].data.example?`<h3>${t[0].data.example}</h3>`:""}
        </div>
    `,e.innerHTML=`
        <div>
            <h3>${t[0].data.word}</h3>
            <h1>${t[0].data.meaning}</h1>
            ${t[0].data.example?`<h3>${t[0].data.example}</h3>`:""}
            <hr>
            <span class="material-symbols-outlined" id="speaker">brand_awareness</span>
            <span class="material-symbols-outlined" id="document">description</span>
            <p id="right">Đã nhớ</p>
            <p id="wrong">Học lại</p>
        </div>
    `}let p=!1,u="none";i.addEventListener("transitionend",function(){p=!0},!1);_(i);function _(n){let e=null,s=null;n.addEventListener("mousedown",a,!1),n.addEventListener("touchstart",a,!1);function a(o){p&&(e=o.clientX===void 0?o.touches[0].clientX:o.clientX,s=o.clientY===void 0?o.touches[0].clientY:o.clientY,document.addEventListener("mousemove",l,!1),document.addEventListener("touchmove",l,!1),document.addEventListener("mouseup",g,!1),document.addEventListener("touchend",g,!1))}function l(o){if(p){if(e===null||s===null)return;const f=o.clientX===void 0?o.touches[0].clientX:o.clientX,v=o.clientY===void 0?o.touches[0].clientY:o.clientY,T=f-e,H=v-s;e=f,s=v,n.style.top=n.offsetTop+H+"px",n.style.left=n.offsetLeft+T+"px";const O=n.style.left.slice(0,-2)/window.innerWidth;n.style.transform="rotate("+-O+"rad) rotateY(180deg)",n.style.left.slice(0,-2)>window.innerWidth*15/100?(u="right",document.getElementById("right").style.display="initial"):n.style.left.slice(0,-2)<-window.innerWidth*15/100?(u="left",document.getElementById("wrong").style.display="initial"):(u="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none")}}function g(){if(e=null,s=null,u=="none")n.style.top=0,n.style.left=0,n.style.transform="rotate(0rad) rotateY(180deg)";else{speechSynthesis.cancel(),u=="right"?(S(L(E,y,t[0].id),{stage:Math.min(Math.max(t[0].data.stage+1,0),9),time:c.now()}),t[0].data.stage=Math.min(Math.max(t[0].data.stage+1,0),9),t[0].data.time=c.now(),t[0].data.stage<=h.length-3?r.push(t.shift()):m.push(t.shift())):u=="left"&&(t[0].data.stage=0,S(L(E,y,t[0].id),{stage:t[0].data.stage,time:c.now()}),t[0].data.time=c.now(),t[0].data.stage!=0?r.push(t.shift()):t.push(t.shift())),[...d][0].innerHTML=t.length,[...d][1].innerHTML=r.length,[...d][2].innerHTML=m.length,localStorage.setItem("green",JSON.stringify(t)),localStorage.setItem("blue",JSON.stringify(r)),localStorage.setItem("yellow",JSON.stringify(m)),n.style="",i.classList="",p=!1,u="none",document.getElementById("right").style.display="none",document.getElementById("wrong").style.display="none";const o=i.getElementsByClassName("front")[0],f=i.getElementsByClassName("back")[0];f.style.color="white",t.length!=0?x(o,f):document.getElementById("test-menu").classList.toggle("show")}document.removeEventListener("mousemove",l,!1),document.removeEventListener("touchmove",l,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1)}}
